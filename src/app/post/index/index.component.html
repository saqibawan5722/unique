
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Create New User</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="form" (ngSubmit)="onSubmit()" style="width: 400px; margin-left: 30px;">

          <!-- <div class="form-group">
             <label class="form-label" for="title">ID</label>
             <input 
                 formControlName="id"
                 id="id" 
                 type="number" 
                 class="form-control"
                 style="border:2px solid darkred;">
             <div *ngIf="f.id.touched && f.id.invalid" class="alert alert-danger">
                 <div *ngIf="f.id.errors.required">Id is required.</div>
             </div>
         </div>    -->
    
         <div class="mb-3">
             <label class="form-label" for="title" >First Name:</label>
             <input 
                 formControlName="firstname"
                 id="title" 
                 type="text" 
                 class="form-control"
                 style="border:2px solid darkred;">
             <div *ngIf="f.firstname.touched && f.firstname.invalid" class="alert alert-success">
                 <div *ngIf="f.firstname.errors.required">firstname is required.</div>
             </div>
         </div>
   
         <div class="mb-3">
             <label class="form-label" for="body">Last Name:</label>
             <input 
                 formControlName="lastname"
                 id="body" 
                 type="text" 
                 class="form-control"
                 style="border:2px solid darkred;">
             <div *ngIf="f.lastname.touched && f.lastname.invalid" class="alert alert-success">
                 <div *ngIf="f.lastname.errors.required">lastname is required.</div>
             </div>
         </div>
 
         <div class="mb-3">
             <label class="form-label" for="body">Email:</label>
             <input 
                 formControlName="email"
                 id="email" 
                 type="text" 
                 class="form-control"
                 style="border:2px solid darkred;">
             <div *ngIf="f.email.touched && f.email.invalid" class="alert alert-success">
                 <div *ngIf="f.email.errors.required">Email is required.</div>
             </div>
         </div>

         <div class="modal-footer">
          <button type="button" class="btn btn-success" data-bs-dismiss="modal">Close</button>
          <button class="btn btn-success" type="submit" [disabled]="!form.valid" data-bs-dismiss="modal">Submit</button>
        </div>
     </form>
      </div>
    </div>
  </div>
</div>






<div class="container">
    <h1 appDirective>Angular CRUD Example</h1>
    <nav class="navbar navbar-expand-lg" style="background-color: darkkhaki;">
        <div class="container-fluid">
          <h3 class="navbar-brand">Wellcome</h3>
          <div class="dropdown">
            <a href="" data-bs-toggle="dropdown" style="padding-right: 10px;"> <i class="fas fa-user-circle" style="font-size: 40px; color: aliceblue;"></i></a>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
              <li><button routerLink="/post/index" class="dropdown-item" type="button">
                <i class="far fa-address-card"></i> 
                Dashboard</button></li>
              <!-- <li><a routerLink="/post/profile"> <i class="fa fa-eye"></i> View Profile </a></li> -->
              <li><button routerLink="/post/profile" class="dropdown-item" type="button">
                <i class="fas fa-users"></i>
                View Profile</button></li>
              <li><button routerLink="/post/profile" class="dropdown-item" [queryParams]="{EditMode:true}" type="button">
                <i class="fas fa-user-edit"></i>
                Edit Profile</button></li>
              <li><button routerLink="/post/changepassword" class="dropdown-item" type="button">
                <i class="fas fa-unlock-alt"></i>
                Change Password</button></li>
             <li><button class="dropdown-item" type="button" (click)="sginout()">
              <i class="fas fa-sign-out-alt"></i>
              Sign Out</button></li> 
            </ul>
          </div>
        </div>
      </nav> 
  


      <!-- for search  and create button -->
      
     <div class="search">

        <a class="search1">
              <!-- <label for="class" style="font-size: 22px; color: black;">Search Module:  </label> -->
              <input id="class" type="search" placeholder="Search..." 
                     [(ngModel)]="firstname" (ngModelChange)="search()" style="outline: none;">
              <!-- <button type="submit"><i class="fa fa-search"> </i></button> -->
        </a>

              <!-- <a href="#" routerLink="/post/create" class="btn btn-success"> Create New User</a> -->
              
              <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal">
                Create New User
              </button>
     </div>
     
    

    
    <table class="table table-bordered ">
    <thead style="text-align: center;">
      <tr>
        <th>ID</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Email</th>
        <th >Action</th>
      </tr>
    </thead>
    <tbody *ngIf="!no_data" style="text-align: center;"
           cdkDropList
           (cdkDropListDropped)="onDrop($event)"
           [cdkDropListData]="posts">
       <tr cdkDrag
           cdkDragLockAxis="y"
           *ngFor="let array of posts | paginate: { 
             itemsPerPage: perPage, 
             currentPage: page,
             totalItems:totalLength } ; let i = index">
          <td cdkDragHandle> {{i+1}} </td>
          <td> {{ array.firstname }} </td>
          <td> {{ array.lastname }} </td>
          <td> {{ array.email }} </td>
          <td>
          <a  [routerLink]="['/post/', array.userId, 'view']" class="btn btn-success btnn">View</a> 
          <a  [routerLink]="['/post/', array.userId, 'edit']" class="btn btn-outline-success btnn">Edit</a>    
         <button type="button" (click)="deletePost(array.userId)" class="btn btn-success btnn">Delete</button> 
        </td>
      </tr>
    </tbody> 
  </table>
  <div class="no-data" *ngIf="no_data">No data found !</div>
    
    
    <!-- <nav aria-label="Page navigation example">
      <ul class="pagination justify-content-end" >
        <li class="page-item"><a class="page-link" href="#">Previous</a></li>
        <li class="page-item "><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item"><a class="page-link" href="#">Next</a></li>
      </ul>
    </nav> -->

    <pagination-controls 
     class="text-end my-pagination"
     (pageChange)="page = $event"  *ngIf="!no_data"
     ></pagination-controls>


     <!-- <app-pagination *ngIf="posts.length != 0"
                     (setPage)="setPage($event)"
                     [perPage]="perPage"
                     [totalPages]="totalPages"
                     [currentPage]="currentPage">
                                </app-pagination> -->
    
 </div>
